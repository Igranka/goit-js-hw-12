{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function http(term, page) {\n  const axiosInstance = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '43250686-c1e1dda9f99928fc2eb99e4d5',\n      q: term,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n\n  const response = await axiosInstance.get('');\n  return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const gallery = document.querySelector('ul.gallery');\nexport function imageCard(images) {\n    const card = images\n    .map(\n        image => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n            />\n            <ul class=\"data\">\n                <li>\n                    <p>Likes ${image.likes}</p>\n                </li>\n                <li>\n                    <p>Views ${image.views}</p>\n                </li>\n                <li>\n                    <p>Comments ${image.comments}</p>\n                </li>\n                <li>\n                    <p>Downloads ${image.downloads}</p>\n                </li>\n            </ul>\n        </a>\n    </li>`\n    )\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", card);\n\n    // Modal\n    const modal = new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionsDelay: 250,\n    });\n\n}\n\n","import \"./js/pixabay-api\";\nimport { http } from \"./js/pixabay-api\";\nimport \"./js/render-function\";\nimport { imageCard } from \"./js/render-function\";\nimport { gallery } from \"./js/render-function\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\"input\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more-button\");\n\nconst modal = new SimpleLightbox(\".gallery-link\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nlet inputTrimmed;\nlet page = 1;\nlet maxPage = 0;\nconst pageVolume = 15;\nlet imageData;\n\nform.addEventListener('submit', submit);\nloadMore.addEventListener('click', load);\n\nasync function submit(event) {\n  event.preventDefault();\n  loader.classList.add(\"is-open\");\n  gallery.innerHTML = \"\";\n  modal.refresh();\n\n  inputTrimmed = input.value.trim();\n  if (inputTrimmed === \"\") {\n    loader.classList.remove(\"is-open\");\n    return iziToast.show({\n        color: '#EF4040',\n        progressBarColor: 'rgb(181, 27, 27)',\n        messageColor: '#FFFFFF',\n        message: `Please enter a valid value`,\n        position: 'topRight',\n    });\n    }\n  page = 1;\n\n  try {\n    imageData = await http(inputTrimmed, page);\n    maxPage = Math.ceil(imageData.totalHits / pageVolume);\n\n    if (imageData.hits.length === 0) {\n      loader.classList.remove(\"is-open\");\n      loadMore.classList.remove(\"is-open\");\n        return iziToast.info({\n            color: '#EF4040',\n            progressBarColor: 'rgb(181, 27, 27)',\n            messageColor: '#FFFFFF',\n            message:'Image limit reached',\n            position: 'topRight',\n      });\n    }\n\n    imageCard(imageData.hits);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loader.classList.remove(\"is-open\");\n  }\n  loader.classList.remove(\"is-open\");\n  input.value = '';\n}\n\nasync function load(event) {\n  loader.classList.add(\"is-open\");\n  page += 1;\n\n  try {\n    imageData = await http(inputTrimmed, page);\n    imageCard(imageData.hits);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loader.classList.remove(\"is-open\");\n    hideButton();\n    \n    //   Smooth scrolling\n  const countCards = 2;\n  const height = gallery.firstElementChild.getBoundingClientRect().height * countCards;\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n  }\n}\n\nfunction hideButton() {\n  if (page >= maxPage) {\n    loadMore.classList.remove(\"is-open\");\n      return iziToast.show({\n      color: '#EF4040',\n      progressBarColor: 'rgb(181, 27, 27)',\n      messageColor: '#FFFFFF',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    loadMore.classList.add(\"is-open\");\n  }\n}\n"],"names":["http","term","page","axios","gallery","imageCard","images","card","image","SimpleLightbox","form","input","loader","loadMore","modal","inputTrimmed","maxPage","pageVolume","imageData","submit","load","event","iziToast","error","hideButton","countCards","height"],"mappings":"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"}